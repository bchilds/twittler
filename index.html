<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/grid.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400" rel="stylesheet">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
      
      <div class="tweets span-5-of-6">
      </div>
      <div class="right-col span-1-of-6">
          <div class="following">
          </div>
          <div class="update">
              <button class="update-btn">Update</button>
          </div>
      </div>
      <div class="post span-6-of-6">
      </div>
      
      
    <script>

      $(document).ready(function(){
        var $body = $('.tweets');
        $body.html(''); //clears .tweets on init
        //at init, 11 random tweets are generated and stored in streams.home

        //init
        var index = streams.home.length - 1;
        var curNumTweets = index; //stores the current number of displayed tweets for update later.

        function appendStoredTweets(index) {
          while(index >= 0){
            var tweet = streams.home[index]; //current tweet is loaded into var tweet
            var $tweet = $('<div></div>'); //each tweet is its own div
            $tweet.text('@' + tweet.user + ': ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          }
        }

        appendStoredTweets(index);

        //first goal is to add new tweets from the scheduler.
        //I want the update button to add all new tweets which have been scheduled since previous update. (.update-btn)

        //on click of .update-btn
        $('.update-btn').on('click', function() {
          index = streams.home.length - 1;
          //decriment through streams.home until current number reached, adding tweets to $body
          appendStoredTweets(index);
          //update curNumTweets
          curNumTweets = streams.home.length - 1;
          //schedule next tweet
          scheduleNextTweet();
        });
          
        //within the tweet generation above, we want to use the time data stored in tweet.created_at and prepend it to the tweet with its own formatting
        //give it a span with class timestamp

      });
        
    </script>
  </body>
</html>
